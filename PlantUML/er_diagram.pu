@startuml erdiagram

entity "Users" as users {
  *id : integer [PK]
  name : string
  email : string
  password_digest : string
  current_emotion_id : integer [FK]
}

entity "Emotions" as emotions {
  *id : integer [PK]
  name : string
  color_code : string
  description : text
}

entity "ChatMessages" as chat_messages {
  *id : integer [PK]
  user_id : integer [FK]
  content : text
}

entity "Questionnaires" as questionnaires {
  *id : integer [PK]
  emotion_id : integer [FK]
  what_happened : text
  how_you_feel : text
  what_to_do_next : text
}

entity "Answers" as answers {
  *id : integer [PK]
  user_id : integer [FK]
  questionnaire_id : integer [FK]
  what_happened_answer : text
  how_you_feel_answer : text
  what_to_do_next_answer : text
}

entity "DiaryEntries" as diary_entries {
  *id : integer [PK]
  user_id : integer [FK]
  emotion_id : integer [FK]
  entry_date : date
  content : text
}

entity "Profiles" as profiles {
  *id : integer [PK]
  user_id : integer [FK]
  interest : text
  strength : text
  hobby : text
}

users ||--o{ emotions : "current_emotion_id"
users ||--o{ chat_messages : ""
users ||--o{ answers : ""
users ||--o{ diary_entries : ""
users ||--|| profiles : ""

emotions ||--o{ questionnaires : "emotion_id"
questionnaires ||--o{ answers : "questionnaire_id"
diary_entries }o--|| emotions : "emotion_id"

@enduml
